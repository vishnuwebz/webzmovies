{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="admin-container">
  {% include 'admin_sidebar.html' %}

  <div class="admin-content">
    <div class="admin-header glass">
      <h2>Edit Movie: {{ movie.title }}</h2>
      <a href="{% url 'movies:admin_movies' %}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back to Movies</a>
    </div>

    <div class="form-container glass">
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-row">
          <div class="form-group">
            <label>Title</label>
            {{ form.title }}
            {% if form.title.errors %}
              <div class="error">{{ form.title.errors }}</div>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Release Date</label>
            {{ form.release_date }}
            {% if form.release_date.errors %}
              <div class="error">{{ form.release_date.errors }}</div>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Telegram Link</label>
            {{ form.telegram_link }}
            {% if form.telegram_link.errors %}
              <div class="error">{{ form.telegram_link.errors }}</div>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Genres</label>
            {{ form.genres }}
            <div class="form-helper">Hold Ctrl/Cmd to select multiple</div>
            {% if form.genres.errors %}
              <div class="error">{{ form.genres.errors }}</div>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Poster</label>
            {{ form.poster }}
            {% if form.poster.errors %}
              <div class="error">{{ form.poster.errors }}</div>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Synopsis</label>
            {{ form.synopsis }}
            {% if form.synopsis.errors %}
              <div class="error">{{ form.synopsis.errors }}</div>
            {% endif %}
          </div>
        </div>

        <!-- NEW: Trailer addition - YouTube embed link field -->
        <div class="form-row">
          <div class="form-group">
            <label>YouTube Trailer URL (Optional)</label>
            {{ form.trailer_url }}
            <div class="form-helper">Enter a full YouTube URL (e.g., https://www.youtube.com/watch?v=VIDEO_ID)</div>
            {% if form.trailer_url.errors %}
              <div class="error">{{ form.trailer_url.errors }}</div>
            {% endif %}
          </div>
        </div>

        <div class="form-row">
          <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block footer %}

{% endblock %}

{% block extra_css %}
<style>
  .form-container {
    padding: 2rem;
  }

  .form-row {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 0.8rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    color: var(--text);
    font-family: inherit;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--accent);
  }

  .form-helper {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 0.3rem;
  }

  .error {
    color: #ff6b6b;
    font-size: 0.85rem;
    margin-top: 0.3rem;
  }
</style>
{% endblock %}